<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8">
<title>Đang tải...</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<style>
  html,body { margin:0; height:100%; background: transparent; }
  body {
    display:flex; align-items:center; justify-content:center;
    flex-direction:column; font-family:Arial, sans-serif;
    -webkit-user-select:none; color:#fff;
  }
  .logo {
    width: 260px;
    height: auto;
    opacity: 0;
    transform: scale(0.95);
    animation: logoIn 0.9s ease forwards;
    margin-bottom: 18px;
    filter: drop-shadow(0 10px 30px rgba(0,0,0,0.6));
  }
  @keyframes logoIn {
    0% { opacity:0; transform:scale(0.95); filter:blur(2px); }
    60% { opacity:1; transform:scale(1.02); filter:drop-shadow(0 18px 40px rgba(255,150,0,0.25)); }
    100% { opacity:1; transform:scale(1); }
  }

  .progressWrap {
    width: 60%;
    height: 12px;
    background: rgba(255,255,255,0.12);
    border-radius: 8px;
    overflow:hidden;
  }
  .progressBar {
    width: 0%;
    height:100%;
    background: linear-gradient(90deg, #f6d365, #fda085);
    transition: width 120ms linear;
    border-radius: 8px;
  }

  /* fade-out class gửi từ main */
  .fade-out { opacity: 0; transform: scale(1.02); transition: opacity 0.8s ease, transform 0.8s ease; }
  .hint { margin-top: 10px; font-size:13px; color:#ddd; opacity:0.95; }
</style>
</head>
<body>
  <img src="logo.png" class="logo" alt="Logo">
  <div class="progressWrap" aria-hidden="true">
    <div id="bar" class="progressBar"></div>
  </div>
  <div class="hint">Nhấn Esc để thoát fullscreen khi vào game</div>

<script>
  // Splash sẽ chạy progress giả trong ~2s
  const bar = document.getElementById('bar');
  let percent = 0;
  const stepMs = 100; // mỗi 100ms tăng
  const maxSteps = 20; // 20 * 100ms = 2000ms
  const inc = 100 / maxSteps;

  const interval = setInterval(()=>{
    percent = Math.min(100, percent + inc);
    bar.style.width = percent + '%';
    if (percent >= 100) {
      clearInterval(interval);
    }
  }, stepMs);

  // Lắng nghe main gửi lệnh fade-out
  const { ipcRenderer } = require('electron');
  ipcRenderer.on('fade-out', () => {
    document.body.classList.add('fade-out');
  });
</script>
</body>
</html>
