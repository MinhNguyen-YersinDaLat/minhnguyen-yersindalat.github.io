<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>ğŸ‰ Gá»i Há»c Sinh Äua ThÃº Cute ğŸ°ğŸ±ğŸ¶</title>
  <style>
    body {
      font-family: 'Comic Sans MS', cursive, Arial, sans-serif;
      background: linear-gradient(135deg, #ffe6f2, #ffb6c1);
      margin: 0;
      padding: 20px;
      overflow-x: hidden;
      text-align: center;
    }
    h1 {
      color: #d63384;
      margin-bottom: 20px;
      text-shadow: 1px 1px 4px #ff69b4;
      font-size: 2.8em;
    }
    textarea {
      width: 360px;
      height: 120px;
      font-size: 16px;
      padding: 12px;
      border-radius: 12px;
      border: 2px solid #ff69b4;
      resize: none;
      box-shadow: 0 0 10px #ff69b4;
      margin-bottom: 15px;
    }
    button {
      padding: 14px 32px;
      font-size: 20px;
      background-color: #d63384;
      color: white;
      border: none;
      border-radius: 30px;
      cursor: pointer;
      box-shadow: 0 6px 15px rgba(214,51,132,0.7);
      transition: background-color 0.3s, transform 0.2s;
      margin-bottom: 30px;
    }
    button:hover {
      background-color: #ff1493;
      transform: scale(1.05);
    }
    #raceTrack {
      position: relative;
      width: 100%;
      max-width: 900px;
      height: 400px;
      background: #fff0f5;
      border: 4px solid #ff69b4;
      border-radius: 20px;
      margin: auto;
      overflow: hidden;
      box-shadow: 0 0 15px #ff69b4;
    }
    .runner {
      position: absolute;
      left: 0;
      width: 60px;
      height: 60px;
      font-size: 50px;
      user-select: none;
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: left 0.1s linear;
    }
    .runner-name {
      font-weight: bold;
      color: #d63384;
      text-shadow: 1px 1px 2px #ff69b4;
      margin-top: 4px;
      font-size: 14px;
      white-space: nowrap;
    }
    #winner {
      font-size: 32px;
      font-weight: 900;
      color: #d63384;
      margin-top: 30px;
      text-shadow: 2px 2px 8px #ff69b4;
      min-height: 50px;
    }
  </style>
</head>
<body>

<h1>ğŸ‰ Gá»i Há»c Sinh Äua ThÃº Cute</h1>
<textarea id="namesInput" placeholder="Nháº­p danh sÃ¡ch há»c sinh, má»—i tÃªn 1 dÃ²ng..."></textarea><br>
<button id="startBtn">ğŸš€ Báº¯t Ä‘áº§u Ä‘ua!</button>

<div id="raceTrack"></div>
<div id="winner"></div>

<script>
  const emojis = ['ğŸ°', 'ğŸ±', 'ğŸ¶', 'ğŸ¦Š', 'ğŸ»', 'ğŸ¼', 'ğŸ¨', 'ğŸ¯', 'ğŸ¸', 'ğŸµ'];
  const raceTrack = document.getElementById('raceTrack');
  const winnerDiv = document.getElementById('winner');
  const startBtn = document.getElementById('startBtn');
  let runners = [];
  let animationId;
  let raceInProgress = false;

  function createRunner(name, index) {
    const runner = document.createElement('div');
    runner.classList.add('runner');
    runner.style.top = `${index * 70 + 20}px`;
    runner.style.left = '0px';

    const emoji = emojis[index % emojis.length];
    runner.innerHTML = `<div>${emoji}</div><div class="runner-name">${name}</div>`;
    raceTrack.appendChild(runner);

    return { element: runner, name, position: 0, speed: 1 + Math.random() * 3 };
  }

  function startRace() {
    if (raceInProgress) return;

    // Clear previous results
    raceTrack.innerHTML = '';
    winnerDiv.textContent = '';
    runners = [];

    // Get names
    const namesText = document.getElementById('namesInput').value.trim();
    if (!namesText) {
      alert('Vui lÃ²ng nháº­p danh sÃ¡ch há»c sinh!');
      return;
    }
    const names = namesText.split('\n').filter(n => n.trim().length > 0);

    if (names.length === 0) {
      alert('Danh sÃ¡ch há»c sinh trá»‘ng!');
      return;
    }

    // Create runners
    names.forEach((name, i) => {
      runners.push(createRunner(name, i));
    });

    raceInProgress = true;
    startBtn.disabled = true;

    animateRace();
  }

  function animateRace() {
    let finished = false;
    const finishLine = raceTrack.clientWidth - 70;

    function step() {
      runners.forEach(runner => {
        if (!finished) {
          runner.position += runner.speed;
          if (runner.position >= finishLine) {
            runner.position = finishLine;
            finished = true;
            raceInProgress = false;
            startBtn.disabled = false;
            winnerDiv.textContent = `ğŸ† NgÆ°á»i chiáº¿n tháº¯ng: ${runner.name} ğŸ‰`;
            speakName(runner.name);
          }
          runner.element.style.left = runner.position + 'px';
        }
      });
      if (!finished) {
        animationId = requestAnimationFrame(step);
      }
    }
    animationId = requestAnimationFrame(step);
  }

  function speakName(name) {
    if (!window.speechSynthesis) return;
    const utterance = new SpeechSynthesisUtterance(name);
    utterance.lang = 'vi-VN';
    window.speechSynthesis.cancel();
    window.speechSynthesis.speak(utterance);
  }

  startBtn.addEventListener('click', startRace);
</script>

</body>
</html>
