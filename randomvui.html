<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>üé≤ Random G·ªçi T√™n H·ªçc Sinh - Th√∫ Chibi D·ªÖ Th∆∞∆°ng</title>
<style>
  body {
    font-family: 'Comic Sans MS', cursive, Arial, sans-serif;
    background: linear-gradient(135deg, #ffe6f0 0%, #ffccd5 100%);
    margin: 0; padding: 0;
    display: flex; flex-direction: column; align-items: center;
    min-height: 100vh;
    user-select: none;
  }
  h1 {
    color: #d63384;
    margin: 20px 0 10px 0;
    text-align: center;
  }
  #container {
    position: relative;
    width: 90vw; max-width: 900px; height: 520px;
    background: #fff0f5;
    border-radius: 20px;
    box-shadow: 0 0 30px rgba(214, 51, 132, 0.3);
    overflow: hidden;
  }
  .animal {
    position: absolute;
    width: 70px; height: 70px;
    text-align: center;
    cursor: default;
    user-select: none;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  .animal img, .animal .icon {
    width: 60px;
    height: 60px;
    border-radius: 15px;
    box-shadow: 0 0 10px rgba(214, 51, 132, 0.5);
    filter: drop-shadow(0 0 3px #d63384);
  }
  .animal .icon {
    font-size: 48px;
    line-height: 60px;
    user-select: none;
  }
  .animal .name {
    font-size: 12px;
    color: #d63384;
    font-weight: bold;
    margin-top: 4px;
    user-select: none;
    width: 70px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  .selected {
    animation: glowPulse 1.5s infinite alternate;
    transform: scale(1.4);
    z-index: 1000 !important;
    box-shadow: 0 0 30px 10px #ff69b4 !important;
  }
  @keyframes glowPulse {
    0% { box-shadow: 0 0 10px 4px #ff69b4; }
    100% { box-shadow: 0 0 30px 10px #ff1493; }
  }
  #btnRandom, #btnContinue {
    margin: 15px 5px 25px 5px;
    padding: 12px 35px;
    background-color: #ff69b4;
    color: white;
    border: none;
    border-radius: 30px;
    font-size: 18px;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(255,105,180,0.6);
    transition: background-color 0.3s ease;
    user-select: none;
  }
  #btnRandom:hover, #btnContinue:hover {
    background-color: #d63384;
  }
  #result {
    margin-top: 15px;
    font-size: 28px;
    color: #d63384;
    font-weight: bold;
    min-height: 70px;
    user-select: none;
    text-align: center;
  }
  #history {
    max-width: 900px;
    margin: 0 auto 30px auto;
    padding: 10px 20px;
    background: #ffd7eb;
    border-radius: 15px;
    box-shadow: 0 0 10px rgba(214, 51, 132, 0.15);
    color: #d63384;
    font-size: 16px;
    font-weight: 600;
  }
  #history h3 {
    margin-top: 0;
  }
  #history ul {
    list-style: none;
    padding: 0;
    margin: 0;
    max-height: 140px;
    overflow-y: auto;
  }
  #history li {
    padding: 4px 0;
    border-bottom: 1px solid #ffa3cc;
  }
</style>
</head>
<body>

<h1>üé≤ Random G·ªçi T√™n H·ªçc Sinh - Th√∫ Chibi D·ªÖ Th∆∞∆°ng</h1>

<div id="container" aria-label="Khu v·ª±c th√∫ nh·∫£y"></div>

<div>
  <button id="btnRandom">üéØ Ch·ªçn Ng·∫´u Nhi√™n</button>
  <button id="btnContinue" style="display:none;">‚ñ∂Ô∏è Ti·∫øp T·ª•c (Lo·∫°i Ng∆∞·ªùi ƒê√£ Ch·ªçn)</button>
</div>

<div id="result" aria-live="polite"></div>

<section id="history" aria-label="L·ªãch s·ª≠ k·∫øt qu·∫£">
  <h3>üèÜ L·ªãch S·ª≠ K·∫øt Qu·∫£:</h3>
  <ul id="historyList"></ul>
</section>

<script>
  // Danh s√°ch 50 h·ªçc sinh + icon chibi emoji (th·∫ßy ƒë·ªïi icon n·∫øu c√≥ ·∫£nh)
  const studentsData = [
    { name: "Nguy·ªÖn VƒÉn A", icon: "üê∞" },{ name: "Tr·∫ßn Th·ªã B", icon: "üê±" },
    { name: "L√™ VƒÉn C", icon: "üêª" },{ name: "Ph·∫°m Th·ªã D", icon: "üê∏" },
    { name: "Ho√†ng VƒÉn E", icon: "ü¶ä" },{ name: "V√µ Th·ªã F", icon: "üê®" },
    { name: "ƒê·∫∑ng VƒÉn G", icon: "üê•" },{ name: "B√πi Th·ªã H", icon: "üêµ" },
    { name: "Phan VƒÉn I", icon: "üêØ" },{ name: "Tr∆∞∆°ng Th·ªã K", icon: "üê∞" },
    { name: "Ng√¥ VƒÉn L", icon: "üêπ" },{ name: "L√Ω Th·ªã M", icon: "üêº" },
    { name: "D∆∞∆°ng VƒÉn N", icon: "üê∂" },{ name: "Tr·∫ßn Th·ªã O", icon: "üêî" },
    { name: "Ph·∫°m VƒÉn P", icon: "ü¶Ñ" },{ name: "V≈© Th·ªã Q", icon: "üêß" },
    { name: "L√™ VƒÉn R", icon: "üê¢" },{ name: "Ho√†ng Th·ªã S", icon: "üêù" },
    { name: "ƒê·ªó VƒÉn T", icon: "ü¶â" },{ name: "Nguy·ªÖn Th·ªã U", icon: "üê∫" },
    { name: "L√¢m VƒÉn V", icon: "üê®" },{ name: "Mai Th·ªã W", icon: "ü¶ã" },
    { name: "Tr·ªãnh VƒÉn X", icon: "üê¨" },{ name: "Ph√πng Th·ªã Y", icon: "ü¶Ñ" },
    { name: "V≈© VƒÉn Z", icon: "üê†" },{ name: "Ho√†ng Anh 1", icon: "ü¶¶" },
    { name: "Nguy·ªÖn B√¨nh 2", icon: "üêøÔ∏è" },{ name: "Tr·∫ßn Lan 3", icon: "üêù" },
    { name: "L√™ Hoa 4", icon: "üê∞" },{ name: "Ph·∫°m H·ªìng 5", icon: "üêß" },
    { name: "Ho√†ng Long 6", icon: "üêª" },{ name: "ƒê·ªó Ph∆∞∆°ng 7", icon: "üê¶" },
    { name: "Nguy·ªÖn Duy 8", icon: "ü¶â" },{ name: "B√πi Mai 9", icon: "üê∂" },
    { name: "Phan Lan 10", icon: "üê¢" },{ name: "Tr∆∞∆°ng S∆°n 11", icon: "üê®" },
    { name: "Ng√¥ H∆∞∆°ng 12", icon: "üê∏" },{ name: "L√Ω B√¨nh 13", icon: "üêØ" },
    { name: "D∆∞∆°ng Nam 14", icon: "üêµ" },{ name: "Tr·∫ßn H∆∞∆°ng 15", icon: "üê∞" },
    { name: "Ph·∫°m Th·∫£o 16", icon: "üê≠" },{ name: "V≈© S∆°n 17", icon: "ü¶¶" },
    { name: "L√™ Thu 18", icon: "üêøÔ∏è" },{ name: "Ho√†ng Mai 19", icon: "üêπ" },
    { name: "ƒê·ªó V√¢n 20", icon: "üê∞" },{ name: "Nguy·ªÖn H√≤a 21", icon: "ü¶ã" },
  ];

  const container = document.getElementById('container');
  const btnRandom = document.getElementById('btnRandom');
  const btnContinue = document.getElementById('btnContinue');
  const result = document.getElementById('result');
  const historyList = document.getElementById('historyList');

  let activeStudents = [...studentsData];
  let selectedStudent = null;
  let history = [];

  // T·∫°o th√∫ chibi l√™n m√†n h√¨nh
  function createAnimals() {
    container.innerHTML = "";
    activeStudents.forEach(stu => {
      const div = document.createElement("div");
      div.classList.add("animal");
      div.style.left = Math.random() * (container.clientWidth - 70) + "px";
      div.style.top = Math.random() * (container.clientHeight - 70) + "px";
      div.innerHTML = `<div class="icon">${stu.icon}</div><div class="name" title="${stu.name}">${stu.name}</div>`;
      container.appendChild(div);
      stu.element = div;
    });
  }

  // Hi·ªáu ·ª©ng nh·∫£y nh√≥t random
  function animateAnimals(duration = 3000) {
    const interval = 120;
    let elapsed = 0;
    function move() {
      activeStudents.forEach(stu => {
        const maxX = container.clientWidth - 70;
        const maxY = container.clientHeight - 70;
        let currentX = parseFloat(stu.element.style.left);
        let currentY = parseFloat(stu.element.style.top);
        let newX = Math.min(maxX, Math.max(0, currentX + (Math.random() * 40 - 20)));
        let newY = Math.min(maxY, Math.max(0, currentY + (Math.random() * 40 - 20)));
        stu.element.style.left = newX + "px";
        stu.element.style.top = newY + "px";
      });
      elapsed += interval;
      if (elapsed < duration) {
        setTimeout(move, interval);
      }
    }
    move();
  }

  // C·∫≠p nh·∫≠t l·ªãch s·ª≠ th·∫Øng
  function updateHistory(name, icon) {
    history.unshift({ name, icon });
    if(history.length > 10) history.pop();
    historyList.innerHTML = "";
    history.forEach((item, idx) => {
      const li = document.createElement('li');
      li.textContent = `${idx+1}. ${item.icon} ${item.name}`;
      historyList.appendChild(li);
    });
  }

  // Ch·ªçn ng·∫´u nhi√™n 1 HS
  function selectRandomStudent() {
    if(activeStudents.length === 0){
      alert("H·∫øt h·ªçc sinh ƒë·ªÉ ch·ªçn! Vui l√≤ng reset ho·∫∑c t·∫£i l·∫°i trang.");
      return;
    }

    // X√≥a class selected c≈©
    activeStudents.forEach(s => s.element.classList.remove('selected'));
    result.textContent = "ƒêang ch·ªçn...";

    animateAnimals(4000);

    setTimeout(() => {
      const idx = Math.floor(Math.random() * activeStudents.length);
      selectedStudent = activeStudents[idx];
      selectedStudent.element.classList.add('selected');
      result.textContent = `üéâ ƒê√£ ch·ªçn: ${selectedStudent.icon} ${selectedStudent.name} üéâ`;

      updateHistory(selectedStudent.name, selectedStudent.icon);

      // Ph√°t nh·∫°c vui
      const audio = new Audio('https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg');
      audio.volume = 0.6;
      audio.play();

      // Hi·ªÉn th·ªã n√∫t ti·∫øp t·ª•c, ·∫©n n√∫t ch·ªçn
      btnRandom.style.display = "none";
      btnContinue.style.display = "inline-block";
    }, 4000);
  }

  // Lo·∫°i b·ªè HS v·ª´a ch·ªçn v√† ch∆°i ti·∫øp
  function continueGame() {
    if(!selectedStudent) return;
    activeStudents = activeStudents.filter(s => s !== selectedStudent);
    selectedStudent = null;
    result.textContent = "";
    btnRandom.style.display = "inline-block";
    btnContinue.style.display = "none";
    createAnimals();
  }

  btnRandom.addEventListener('click', selectRandomStudent);
  btnContinue.addEventListener('click', continueGame);

  // Kh·ªüi t·∫°o game l·∫ßn ƒë·∫ßu
  createAnimals();

</script>

</body>
</html>
